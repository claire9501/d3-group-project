<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>P3: Positive Plotly Pegasi </title>
    <link href="https://fonts.googleapis.com/css2?family=Asap:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>


    <script src="./static/js/countUp.js"></script>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./static/css/style.css">
</head>

<body>
    <div class="container-fluid">
        <!-- Header -->
        <div class="row justify-content-lg-center">
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

            <div class="col-lg-8" id="header">

                <a data-toggle="collapse" href="#collapseMap" role="button" aria-expanded="false" aria-controls="collapseMap">
                    <img src="./static/images/logo.png" alt="logo p3" width="50px" id="logo"></a>
                <h2 class="teamname">P3 : Positive Plotly Pegasi</h2>
                <!-- <p class="groupname">P3 : Positive Plotly Pegasi</p> -->
            </div>


            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>
        </div>

        <!--  aboutus -->
        <div class="row justify-content-lg-center">
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

            <div class="col-md-8" id='aboutus'>
                <div class="jumbotron jumbotron-fluid">
                    <div class="container">
                        <h1 class="display-4">Is there earthquake weather?</h1>
                        <p class="lead">Earthquakes occur during "earthquake weather." This myth that earthquakes occur during hot and dry weather dates to the ancient Greeks. We display the weather temperature on the day of the earthquake along with the previous 3 days
                            leading up to the earthquake. The difference in weather temperature change will be charted with historical magnitude data. </p>

                        <br><br><br>
                        <span class="small_details"><a href="https://www.usgs.gov/faqs/there-earthquake-weather?qt-news_science_products=0#qt-news_science_products" target="blank_">Source: USGS.gov</a></span><br>
                        <span class="small_details"><a href="https://www.conservation.ca.gov/cgs/Pages/Earthquakes/earthquake_myths.aspx" target="blank_">Source: CA.gov</a></span>

                    </div>
                </div>
            </div>


            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

        </div>

        <!-- collapse: 1st -->
        <div class="collapse" id="collapseMap">
            <div class="card card-body">
                <div class="col col-lg-2">
                    <!-- leave empty -->
                </div>
                <div class="row justify-content-lg-center">


                    <div class="row justify-content-lg-center" id="test">
                        <h2> Behind the scenes:</h2>
                    </div>
                    <!--  left side -->
                    <div class="col-lg-4 bts-format">

                        <!-- Begin table -->
                        <table class="table" id="bts-table">
                            <thead class="thead-dark">
                                <tr class="d-flex">
                                    <th class="col-3">Section</th>
                                    <th class="col-9">Notes / Observations</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="d-flex">
                                    <td class="col-sm-3">
                                        <h3>Map:</h3>
                                    </td>
                                    <td class="col-sm-9">
                                        <ul id='bts'>
                                            <li>Obtain Earthquake API query, Dislay data points on the map.</li>
                                            <li>
                                                <a href="../static/images/update_data_vs.png" target="blank_"><img src="../static/images/update_data_vs.png" width="150px" class="textwrap"></a>On click, send magnitude of selected datapoint to the magnitude box & send the latitude to the database. <br> For this use
                                                case, the latitude should not match more than one earthquake as there is no earthquake that lands directly in the same latitude coordinates.</li>
                                            <li>
                                                <a href="../static/images/weatherdataretreive.png" target="blank_"><img src="../static/images/weatherdataretreive.png" width="150px" class="textwrap"></a>The result is flask executing a function within a file called "update_data.py." This function queries the database and
                                                returns a json, which passes through flask and onto the site.
                                            </li>
                                            <li>
                                                <a href="../static/images/updateDataWeatherAll.png" target="blank_"><img src="../static/images/update_data_vs.png" width="150px" class="textwrap"></a>Update Data holds various functions calls to send a JSON back to the JS call. Update data will query a DB call and retreive
                                                the information needed before finalizing and passing the JSON.
                                            </li>
                                        </ul>
                                    </td>

                                </tr>

                            </tbody>
                        </table>
                        <!-- End table -->
                    </div>

                    <!-- right side -->
                    <div class="col-lg-4 bts-format">

                        <!-- Begin table -->
                        <table class="table" id="bts-table">
                            <thead class="thead-dark">
                                <tr class="d-flex">
                                    <th class="col-3">Section</th>
                                    <th class="col-9">Notes / Observations</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="d-flex">
                                    <td class="col-sm-3">
                                        <h3>D3 Graph:</h3>
                                    </td>
                                    <td class="col-sm-9">
                                        <ul id='bts'>
                                            <li>Async JS Function creates a svg container for the graph.</li>
                                            <li>
                                                <a href="../static/images/graphJSCall.png" target="blank_"><img src="../static/images/graphJSCall.png" width="150px" class="textwrap"></a>D3.JSON requests a json file from the api '/site/chart'. Flask calls 'analysisChartCall' found in update_data.py. Returns a
                                                JSON.
                                            </li>
                                            <li>
                                                <a href="../static/images/graphFlaskCall.png" target="blank_"><img src="../static/images/graphFlaskCall.png" width="150px" class="textwrap"></a>The result is flask executing a function within a file called "update_data.py." This function queries the database and returns
                                                a json, which passes through flask and onto the site.
                                            </li>
                                            <li>
                                                <a href="../static/images/graphDBCall.png" target="blank_"><img src="../static/images/graphDBCall.png" width="150px" class="textwrap"></a>analysisChartCall() is executed and returns a list of tuples to be 'jsonified'. The async funtion then completed the graph for
                                                display.
                                            </li>
                                        </ul>
                                    </td>

                                </tr>

                            </tbody>
                        </table>
                        <!-- End table -->

                    </div>
                </div>
                <div class="col col-lg-2">
                    <!-- leave empty -->
                </div>

            </div>
        </div>


        <!-- Map & Temperature Information -->
        <div class="row justify-content-lg-center">
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

            <div class="col-md-4" id="map">
                Map
            </div>

            <div class="col-md-4" id="temperature">
                <div class="row justify-content-md-center" id='box1'>
                    <!-- Information from map appears here -->
                    <div class="col viz" id="vizid">
                    </div>
                </div>
                <div class="row justify-content-md-center" id='box2'>
                    <div class="col chart" id="vizid2">
                    </div>
                </div>

            </div>
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>
        </div>

        <!-- collapse: 2nd -->
        <div class="collapse" id="collapseFacts">
            <div class="card card-body">

                <div class="col col-lg-2">
                    <!-- leave empty -->
                </div>
                <div class="row justify-content-lg-center">


                    <div class="row justify-content-lg-center" id="test">
                        <h2> Behind the scenes:</h2>
                    </div>
                    <!--  left side -->
                    <div class="col-lg-4 bts-format">

                        <!-- Begin table -->
                        <table class="table" id="bts-table">
                            <thead class="thead-dark">
                                <tr class="d-flex">
                                    <th class="col-3">Section</th>
                                    <th class="col-9">Notes / Observations</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="d-flex">
                                    <td class="col-sm-3">
                                        <h3>Fact Box:</h3>
                                    </td>
                                    <td class="col-sm-9">
                                        <ul id='bts'>
                                            <li>
                                                <a href="../static/images/facts_jsFunc.png" target="blank_"><img src="../static/images/facts_jsFunc.png" width="150px" class="textwrap"></a>Passive function obtains a JSON with the count of quakes above 6.0 mag along with the highest recorded earthquake magnitude,
                                                location and date. jQuery countUp.js animated the count of earthquakes above 6.0. </li>
                                            <li>
                                                Flask API link is triggerd to retreive the JSON from 'update_data.js' The referece displays both fact boxes and table generated.
                                                <a href="../static/images/facts_flask_calls.png" target="blank_"><img src="../static/images/facts_flask_calls.png" width="150px" class="textwrap"></a>
                                            </li>
                                            <li>
                                                Update_data.js has a number of functions-- this time the query specifically requires select data-- not all.
                                                <a href="../static/images/weatherdataretreive.png" target="blank_"><img src="../static/images/facts_db_call.png" width="150px" class="textwrap"></a>
                                            </li>

                                        </ul>
                                    </td>

                                </tr>

                            </tbody>
                        </table>
                        <!-- End table -->
                    </div>

                    <!-- right side -->
                    <div class="col-lg-4 bts-format">

                        <!-- Begin table -->
                        <table class="table" id="bts-table">
                            <thead class="thead-dark">
                                <tr class="d-flex">
                                    <th class="col-3">Section</th>
                                    <th class="col-9">Notes / Observations</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="d-flex">
                                    <td class="col-sm-3">
                                        <h3>Latest Earthquakes:</h3>
                                    </td>
                                    <td class="col-sm-9">
                                        <ul id='bts'>
                                            <li>The table generated displays all latest earthquakes along with the temperature of that day. All data is retreived from the db.
                                                <a href="../static/images/facts_flask_calls.png" target="blank_"><img src="../static/images/facts_flask_calls.png" width="150px" class="textwrap"></a>
                                            </li>
                                            <li>
                                                The passive function found on logic.js calls Flask API link "/site/factsLatestQuake". Once complete, the JSON returned is sent back to the JS function and displayed.
                                            </li>

                                        </ul>
                                    </td>

                                </tr>

                            </tbody>
                        </table>
                        <!-- End table -->

                    </div>
                </div>
                <div class="col col-lg-2">
                    <!-- leave empty -->
                </div>





            </div>
        </div>
        <!--  Facts -->
        <div class="row justify-content-lg-center">
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

            <div class="col-md-8" id='fact-boxes'>
                <a data-toggle="collapse" href="#collapseFacts" role="button" aria-expanded="false" aria-controls="collapseFacts">
                    <span class='title'>In the past month...</span></a>



                <div id="table-area" class="latest5holder">
                    <table id="latest5" class="table table-striped">
                        <thead>
                            <tr>
                                <span class="leq">Latest Earthquakes</span>
                            </tr>
                            <tr>
                                <th class="table-head">Date</th>
                                <th class="table-head">Country</th>
                                <th class="table-head">Region</th>
                                <th class="table-head">Magnitude</th>
                                <th class="table-head">High</th>
                                <th class="table-head">Low</th>
                                <th class="table-head">Avg</th>
                            </tr>
                        </thead>
                        <tbody id="target-table-display"></tbody>

                    </table>
                </div>


            </div>

            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>

        </div>


        <!-- collapse: 3rd rona -->
        <div class="collapse" id="collapseCalifornia">
            <div class="card card-body">


                <div class="col col-lg-2">
                    <!-- leave empty -->
                </div>
                <div class="row justify-content-lg-center">


                    <div class="row justify-content-lg-center" id="test">
                        <h2> Behind the scenes:</h2>
                    </div>
                    <!--  left side -->
                    <div class="col-lg-6 bts-format">

                        <!-- Begin table -->
                        <table class="table" id="bts-table">
                            <thead class="thead-dark">
                                <tr class="d-flex">
                                    <th class="col-3">Section</th>
                                    <th class="col-9">Notes / Observations</th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr class="d-flex">
                                    <td class="col-sm-3">
                                        <br>
                                        <h3>Map:</h3>
                                    </td>
                                    <td class="col-sm-9">
                                        <ul id='bts'>

                                            <li>
                                                <a href="../static/images/rona_python.png" target="blank_"><img src="../static/images/rona_python.png" width="150px" alt="Python example" class="textwrap"></a><br>Using WeatherStack API, we collected temperatures for the 1,258 locations in a given area. We collected
                                                the temperatures for the day of the earthquake and the day before the earthquake.</li>
                                            <li>
                                                <a href="../static/images/rona_js.png" target="blank_"><img src="../static/images/rona_js.png" width="150px" alt="JS example" class="textwrap"></a><br><br><br><br><br><br>Using D3, we created a heatmap layer which represents the difference in temperature the
                                                day before and the day of the earthquake.
                                            </li>
                                        </ul>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <!-- End table -->
                    </div>

                    <!-- right side -->



                    <!-- End table -->

                </div>
            </div>
            <div class="col col-lg-2">
                <!-- leave empty -->
            </div>





        </div>
    </div>



    <!-- California Content -->
    <div class="row justify-content-lg-center">
        <div class="col col-lg-2">
            <!-- leave empty -->
        </div>


        <div class="col-md-8" id='california-data'>
            <a data-toggle="collapse" href="#collapseCalifornia" role="button" aria-expanded="false" aria-controls="collapseCalifornia">
                <h2 class='historic-title'>Historic Earthquakes: Japan, Baja, Ridgecrest, and Eureka</h2>
            </a>


            <div class="row d-flex justify-content-center" id="historytitle">
                <div class="col-md-6" id="ronamap">
                    map goes here

                </div>



                <div class="col-md-6" id="ronahistoricinfo">
                    <!-- Info -->
                    <div class="row">
                        <td class="col-sm">
                            <ul id='rona'>
                                <li>
                                    <strong>Tohoku (Japan) Quake, March 9, 2011.</strong> <br><strong>Magnitude:</strong> 7.2, <br><strong>Mean Temperature Change:</strong> 1.9.
                                    <br><br>This map of Japan shows the foreshocks, mainshock and aftershocks of the Tohoku quake that caused a tsunami in 2011. The heatmap represents the change in temperature from the day before and the day of the quake.
                                    With red being the biggest change and faint purple representing a change of less than 1°F.

                                </li>
                                <li>
                                    Creating the heatmap layer using D3.
                                </li>
                            </ul>
                        </td>
                    </div>

                </div>
            </div>

            <div class="row d-flex justify-content-center">
                <div class="card" style="width: 18rem;">
                    <a href="../static/images/historic_baja.png" target="blank_" alt="Historic Eureka"><img class="card-img-top" src="../static/images/historic_baja.png" alt="Historic Baja" width="200px"></a>
                    <div class="card-body">
                        <p class="card-text"><strong>Baja California Quake</strong><br> April 4, 2010. <br> Magnitude: 7.2<br> Mean temperature change: 2.13
                        </p>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <a href="../static/images/historic_ridgecrest.png" target="blank_" alt="Historic Eureka"><img class="card-img-top" src="../static/images/historic_ridgecrest.png" alt="Historic Ridgecrest" width="200px"></a>
                    <div class="card-body">
                        <p class="card-text"><strong>Ridgecrest Quake</strong><br> July 5, 2019, 22:19 PDT. <br> Magnitude: 7.1<br> Mean temperature change: 2.81
                        </p>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <a href="../static/images/historic_eureka.png" target="blank_" alt="Historic Eureka"><img class="card-img-top" src="../static/images/historic_eureka.png" alt="Historic Baja" width="200px"></a>
                    <div class="card-body">
                        <p class="card-text"><strong>Eureka Quake</strong><br> January 10, 2010, 16:27 PST. <br> Magnitude: 6.5<br> Mean temperature change: 2.63
                        </p>
                    </div>
                </div>

            </div>
        </div>






        <div class="col col-lg-2">
            <!-- leave empty -->
        </div>
    </div>


    <!--  Footer -->
    <div class="row justify-content-lg-center">
        <div class="col col-lg-2">
            <!-- leave empty -->
        </div>

        <div class="col-md-8" id='footer'>
            <h2 class='aboutus-title'>Thank you,</h2>
            <span class="smalltext">from Team Positive Plotly Pegasi.</span>
            <div class="row align-items-center" id="footertext">

                <td>
                    <ul>Name
                        <li>Rona Bourdeau</li>
                        <li>Jackie Song</li>
                        <li>Christian Pompa</li>
                    </ul>
                </td>
                <td>
                    <ul>Sources (API / References)
                        <li><a href="https://weatherstack.com/" target="_blank" alt="Weather Stack">Weather Stack</a></li>
                        <li><a href="https://earthquake.usgs.gov/" target="_blank" alt="USGS">USGS</a></li>
                        <li>A lot of
                            <a href="https://www.google.com" target="_blank" alt="Google">Google </a></li>
                    </ul>
                </td>
            </div>
        </div>


        <div class="col col-lg-2">
            <!-- leave empty -->
        </div>

    </div>







    <!--  Libraries to load -->
    <!-- Leaflet JS-->
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js" integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q==" crossorigin=""></script>
    <!-- d3 JavaScript -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <!-- Leaflet-Choropleth JavaScript -->
    <!-- <script type="text/javascript" src="static/js/choropleth.js"></script> -->
    <!-- Our JS -->
    <script type="text/javascript" src="./static/js/config.js"></script>
    <script type="text/javascript" src="./static/js/logic.js" type="module"></script>
    <script type="text/javascript" src="./static/js/logic-rona.js"></script>
    <script type="text/javascript" src="./static/js/leaflet-heat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="./static/css/style.css">

    </div>
    <script>
        function countUpFunc() {
            d3.json(`site/facts`, function(d) {
                var countUp = new CountUp('facts', d[0]['count']);
                countUp.start();

            });
        };
        countUpFunc();
    </script>

</body>

</html>